import{r as s,o as l,c as _,a as n,b as e,w as o,d,e as h,F as m,f as a}from"./index-6Z8LQik9.js";var f={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_API_NAME:"vue-week2-new",BASE_URL:"/vue-week6-Airbnb/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const p={class:"container",style:{"z-index":"1"}},k={class:"nav justify-content-between align-items-center py-8"},v={class:"d-flex justify-content-between align-items-center"},w=n("button",{class:"btn nav-link text-secondary d-none"},"登出",-1),{VITE_APP_API_URL:b}=f,$={data(){return{token:""}},methods:{checkLogin(){if(this.token===""){this.$swal.fire({showConfirmButton:!1,timer:1500,icon:"error",title:"請先登入"}),setTimeout(()=>{this.$router.push("/login")},1500);return}this.$http.post(`${b}/api/user/check`).then(()=>{this.$router.push("/admin/products")}).catch(()=>{this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,icon:"error",title:"身份驗證有誤，請重新登入"}),this.$router.push("/login")})}},mounted(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.$http.defaults.headers.common.Authorization=this.token}},V=Object.assign($,{inheritAttrs:!1},{__name:"UserLayout",setup(A){return(i,r)=>{const t=s("RouterLink"),c=s("font-awesome-icon"),u=s("RouterView");return l(),_(m,null,[n("div",p,[n("nav",k,[e(t,{class:"nav-link",to:"/"},{default:o(()=>[a("首頁")]),_:1}),e(t,{class:"nav-link",to:"/user/products"},{default:o(()=>[a("產品")]),_:1}),e(t,{class:"nav-link",to:"/user/about"},{default:o(()=>[a("關於我們")]),_:1}),n("nav",v,[i.token===""?(l(),d(t,{key:0,class:"nav-link text-secondary",to:"/login"},{default:o(()=>[e(c,{icon:"user"})]),_:1})):h("",!0),w,e(t,{class:"nav-link",to:"/user/cart"},{default:o(()=>[e(c,{icon:"cart-shopping"})]),_:1}),n("button",{class:"nav-link btn",onClick:r[0]||(r[0]=g=>i.checkLogin())},"進入後台")])])]),e(u,{class:"text-center"})],64)}}});export{V as default};

import{r as c,o as e,c as i,a as t,F as d,i as m,b as f,w as p,t as n,d as g}from"./index-6Z8LQik9.js";var b={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_API_NAME:"vue-week2-new",BASE_URL:"/vue-week6-Airbnb/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const w=t("section",{class:"w-full d-flex justify-content-center align-items-end",style:{height:"300px","background-size":"cover","background-position":"center","background-image":`radial-gradient(rgb(0 0 0 / 0%),rgb(0 0 0 / 40%)),
      url('https://images.unsplash.com/photo-1568108499813-b04341f126b2?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')`}},[t("h5",{class:"text-secondary"}," - 藝術品鑑賞與收藏 - ")],-1),k={class:"container"},y={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-2xl-4 g-4 py-60"},P={class:"card rounded mb-3"},A=["src"],C={class:"card-body"},v={class:"card-title"},x={class:"card-footer d-flex justify-content-between align-items-center"},L={key:0,class:"h5"},$={key:1,class:"m-0"},B={class:"text-gray-300 align-middle"},E={class:"h5 ms-3 align-middle"},D=["disabled","onClick"],V={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},{VITE_APP_API_URL:l,VITE_APP_API_NAME:_}=b,I={data(){return{isLoading:!0,products:[],cartData:[],status:{addCartLoading:""}}},methods:{getProducts(){setTimeout(()=>{this.$http.get(`${l}/api/${_}/products`).then(a=>{this.isLoading=!1,this.products=a.data.products}).catch(()=>{this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,icon:"error",title:"很抱歉，目前無法載入資料。"})})},1e3)},addCart(a,o=1){this.status.addCartLoading=a;const r={product_id:a,qty:o};this.$http.post(`${l}/api/${_}/cart`,{data:r}).then(()=>{this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,icon:"success",title:"成功加入購物車！"}),this.status.addCartLoading=""}).catch(()=>{this.$swal.fire({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,icon:"error",title:"加入購物車失敗，請重新操作。"}),this.status.addCartLoading=""})}},mounted(){this.getProducts()}},j=Object.assign(I,{inheritAttrs:!1},{__name:"UserProducts",setup(a){return(o,r)=>{const h=c("RouterLink"),u=c("font-awesome-icon");return e(),i(d,null,[w,t("main",k,[t("section",y,[(e(!0),i(d,null,m(o.products,s=>(e(),i("article",{class:"col",key:s.id},[t("div",P,[f(h,{to:`/user/products/${s.id}`},{default:p(()=>[t("img",{src:`${s.imageUrl}`,class:"card-img-top",style:{height:"350px","object-fit":"cover"}},null,8,A)]),_:2},1032,["to"]),t("div",C,[t("h4",v,n(s.title),1)]),t("div",x,[s.price?(e(),i("p",$,[t("del",B," 原價 "+n(s.origin_price)+" 元 ",1),t("span",E," 現在只要 "+n(s.price)+" 元 ",1)])):(e(),i("div",L,n(s.origin_price)+" 元 ",1)),t("button",{type:"button",class:"btn btn-lg",disabled:s.id===o.status.addCartLoading,onClick:R=>o.addCart(s.id)},[s.id===o.status.addCartLoading?(e(),i("span",V)):(e(),g(u,{key:1,icon:["fas","circle-plus"]}))],8,D)])])]))),128))])])],64)}}});export{j as default};
